// Code generated by stefgen. DO NOT EDIT.
package profile

import (
	"github.com/splunk/stef/go/pkg"
	"github.com/splunk/stef/go/pkg/encoders"
)

var _ = (*encoders.StringEncoder)(nil)

type WriterState struct {
	limiter pkg.SizeLimiter

	StructFieldCounts StructFieldCounts

	// Dictionaries
	BuildID         encoders.StringDictEncoderDict
	Filename        encoders.StringDictEncoderDict
	Function        FunctionEncoderDict
	FunctionName    encoders.StringDictEncoderDict
	LabelKey        encoders.StringDictEncoderDict
	LabelValue      encoders.StringDictEncoderDict
	Location        LocationEncoderDict
	Mapping         MappingEncoderDict
	NumValueUnit    encoders.StringDictEncoderDict
	SampleValueType SampleValueTypeEncoderDict
	SystemName      encoders.StringDictEncoderDict

	// Encoders that are being Init-ed, to detect recursion.
	FunctionEncoder         *FunctionEncoder
	LabelValueEncoder       *LabelValueEncoder
	LabelsEncoder           *LabelsEncoder
	LineEncoder             *LineEncoder
	LineArrayEncoder        *LineArrayEncoder
	LocationEncoder         *LocationEncoder
	LocationArrayEncoder    *LocationArrayEncoder
	MappingEncoder          *MappingEncoder
	NumValueEncoder         *NumValueEncoder
	ProfileMetadataEncoder  *ProfileMetadataEncoder
	SampleEncoder           *SampleEncoder
	SampleValueEncoder      *SampleValueEncoder
	SampleValueArrayEncoder *SampleValueArrayEncoder
	SampleValueTypeEncoder  *SampleValueTypeEncoder
	StringArrayEncoder      *StringArrayEncoder

	Allocators Allocators
}

func (d *WriterState) Init(opts *pkg.WriterOptions) {
	d.limiter.Init(opts)

	d.StructFieldCounts.Init(opts.Schema)

	// Init dictionaries
	d.BuildID.Init(&d.limiter)
	d.Filename.Init(&d.limiter)
	d.Function.Init(&d.limiter)
	d.FunctionName.Init(&d.limiter)
	d.LabelKey.Init(&d.limiter)
	d.LabelValue.Init(&d.limiter)
	d.Location.Init(&d.limiter)
	d.Mapping.Init(&d.limiter)
	d.NumValueUnit.Init(&d.limiter)
	d.SampleValueType.Init(&d.limiter)
	d.SystemName.Init(&d.limiter)

}

func (d *WriterState) ResetDicts() {
	d.limiter.ResetDict()
	d.BuildID.Reset()
	d.Filename.Reset()
	d.Function.Reset()
	d.FunctionName.Reset()
	d.LabelKey.Reset()
	d.LabelValue.Reset()
	d.Location.Reset()
	d.Mapping.Reset()
	d.NumValueUnit.Reset()
	d.SampleValueType.Reset()
	d.SystemName.Reset()
}
